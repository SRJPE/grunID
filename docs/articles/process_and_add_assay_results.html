<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="grunID">
<title>Process and Add Assay Results to Database • grunID</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Process and Add Assay Results to Database">
<meta property="og:description" content="grunID">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">grunID</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/azure-authentication.html">Authentication with Azure AD</a>
    <a class="dropdown-item" href="../articles/process_and_add_assay_results.html">Process and add assay results to database</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="https://github.com/FlowWest/grunID" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Process and Add Assay Results to Database</h1>
            
      
      
      <div class="d-none name"><code>process_and_add_assay_results.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="objective">Objective<a class="anchor" aria-label="anchor" href="#objective"></a>
</h2>
<p>This tutorial describes how to:</p>
<ol style="list-style-type: decimal">
<li>securely manage database credentials</li>
<li>connect to the genetics run identification database</li>
<li>write plate run metadata to the database</li>
<li>prepare Synergy H1 result data for upload to the database</li>
<li>upload assay result data to the database</li>
</ol>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<p>The following packages are required:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">grunID</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/config" class="external-link">config</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpostgres.r-dbi.org" class="external-link">RPostgres</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="database-credentials">Database Credentials<a class="anchor" aria-label="anchor" href="#database-credentials"></a>
</h2>
<p>For improved security, we recommend managing your database credential
information with environment variables. The <code>config</code> package
makes it easy to manage environment variables. The database
administrator will provide you with the necessary credential information
to connect to the database.</p>
<p>First, you will need to create a <strong>config.yml</strong> file
with the following information:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">default</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">dbname</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">DATABASE_NAME</span><span class="kw">}</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">host</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">HOST_ADDRESS</span><span class="kw">}</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">PORT_NUMBER</span><span class="kw">}</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">username</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">YOUR_USERNAME</span><span class="kw">}</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">YOUR_PASSWORD</span><span class="kw">}</span></span></code></pre></div>
<p>Replace all <code>{*}</code> place holders with the credential
information provided by the database administrator.</p>
<p>It is important to not accidentally share credentials online. If you
are pushing your analysis to Github make sure to add
<code>config.yml</code> to your <strong>.gitignore</strong> file.</p>
<p>By default, the configuration data is read from
<strong>config.yml</strong> within the current working directory (or
parent directories if no config file is found in the initially specified
directory). For more details see the <a href="https://rstudio.github.io/config/" class="external-link">config docs</a>.</p>
<p>To load the credential information into memory call:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu">config</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/config/man/get.html" class="external-link">get</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="database-connection">Database Connection<a class="anchor" aria-label="anchor" href="#database-connection"></a>
</h2>
<p>The <code>DBI</code> package provides simple and consistent methods
for connecting R to database management systems (DBMS). For more details
see the <a href="https://dbi.r-dbi.org/" class="external-link">DBI docs</a>. The genetic run
identification DBMS is implemented with PostgreSQL. We use the
<code>RPostgres</code> package to define the proper operations for
creating connections and defining data type mappings. For more details
see the <a href="https://rpostgres.r-dbi.org/" class="external-link">RPostgres docs</a>.</p>
<p>To create a connection object, we pass our credentials to
<code><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">DBI::dbConnect()</a></code> and specify a PostgreSQL driver.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RPostgres</span><span class="fu">::</span><span class="fu"><a href="https://rpostgres.r-dbi.org/reference/Postgres.html" class="external-link">Postgres</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                      dbname <span class="op">=</span> <span class="va">cfg</span><span class="op">$</span><span class="va">dbname</span>,</span>
<span>                      host <span class="op">=</span> <span class="va">cfg</span><span class="op">$</span><span class="va">host</span>, </span>
<span>                      port <span class="op">=</span> <span class="va">cfg</span><span class="op">$</span><span class="va">port</span>,</span>
<span>                      user <span class="op">=</span> <span class="va">cfg</span><span class="op">$</span><span class="va">username</span>,</span>
<span>                      password <span class="op">=</span> <span class="va">cfg</span><span class="op">$</span><span class="va">password</span><span class="op">)</span></span></code></pre></div>
<p>Every time we use a function to read or write to the database, we
will pass this connection object to the function.</p>
</div>
<div class="section level2">
<h2 id="add-plate-run-metadata">Add Plate Run Metadata<a class="anchor" aria-label="anchor" href="#add-plate-run-metadata"></a>
</h2>
<p>When a plate is run on the Synergy H1 reader, we want to relate
critical plate run metadata with the assay results from that particular
run in our database. We call <code><a href="../reference/add_plate_run.html">add_plate_run()</a></code> providing the
protocol ID, method ID, laboratory ID, and the person who ran the plate.
The function returns a unique plate run ID that will be associated with
the assay result records. Because our assay results reference the plate
run ID, we must add a plate run in our database before adding assay
result data.</p>
<p>If you do not know the ID for the protocol used, you can review all
existing protocols stored in the database with the following code:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_protocols</span> <span class="op">&lt;-</span> <span class="fu">grunID</span><span class="fu">::</span><span class="fu">get_protocol</span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></code></pre></div>
<p>Select appropriate protocol ID with this code:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">protocol_id</span> <span class="op">&lt;-</span> <span class="va">all_protocols</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span></code></pre></div>
<p>Similarly, you can call <code>get_genetic_method()</code> and
<code>get_laboratory_id()</code> to review the IDs associated with
methods and laboratories within the database.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">genetic_method_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_genetic_methods.html">get_genetic_methods</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">method_name</span> <span class="op">==</span> <span class="st">"SHERLOCK"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="co"># SHERLOCK</span></span>
<span></span>
<span><span class="va">laboratory_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_laboratories.html">get_laboratories</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">code</span>, <span class="st">"DWR"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pull</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="co"># DWR GeM</span></span>
<span></span>
<span><span class="va">plate_run_id</span> <span class="op">&lt;-</span> <span class="fu">grunID</span><span class="fu">::</span><span class="fu"><a href="../reference/add_plate_run.html">add_plate_run</a></span><span class="op">(</span><span class="va">con</span>, <span class="va">protocol_id</span>, <span class="va">genetic_method_id</span>,</span>
<span>                                       <span class="va">laboratory_id</span>, lab_work_performed_by <span class="op">=</span> <span class="st">"Yogi Bear"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="prepare-sample-details">Prepare Sample Details<a class="anchor" aria-label="anchor" href="#prepare-sample-details"></a>
</h2>
<p>The Synergy H1 result output from plate runs is organized using
generic identifiers that need to be mapped to the real sample
identifiers in order to properly associate the results with the correct
sample id in the database. The output file’s <strong>Layout</strong>
section contains the well locations for samples encoded as non-unique
generic sample ids <em>(e.g., SPL1, BLK)</em>. The number of rows and
columns in the <strong>Layout</strong> vary based on the plate size. A
plate size 96 has rows A:H and columns 1:12 and a plate size 384 has
rows A:P and columns 1:24. The results for each sample are found within
columns that are the letter-number combination of the well location
captured in the <strong>Layout</strong> section <em>(e.g., if SPL1 is in
row A and column 3, then the measurements at each time step are recorded
in a column labeled A3)</em>. To map the sample ids to the generic
identifiers produced by the Synergy H1 software <em>(e.g., SPL1 and
A3)</em>, we must provide the true sample ids and other metadata at each
well location in the results as a dataframe containing these
columns:</p>
<ul>
<li>
<strong>location:</strong> <em>(character)</em> letter-number
combination based on Synergy H1 Layout grid (e.g., A3)</li>
<li>
<strong>sample_id:</strong> <em>(character)</em> unique ID of mucus
swab or fin clip made up of site code, year, sample event, sampling bin,
and count within sampling bin (e.g., BTC22_3_A_1)</li>
<li>
<strong>sample_type:</strong> <em>(numeric)</em> provide 1 for mucus
and 2 for fin clip</li>
<li>
<strong>assay_id:</strong> <em>(numeric)</em> the ID for assay types
(e.g., 1 = OTS28 Early 1), use <code>get_assay()</code> to view all
available options.</li>
<li>
<strong>plate_run_id:</strong> <em>(numeric)</em> the ID returned
from running <code><a href="../reference/add_plate_run.html">add_plate_run()</a></code> to associate important
metadata with the assay results</li>
</ul>
<p>We can map the generic sample identifiers <em>(e.g. SPL1)</em> to the
JPE sample identifiers <em>(e.g. F1722_3_A_1)</em> using the
<code>Plate Map</code> tab of the output file. This tab should contain
the well layout locations with JPE sample identifiers, and the name of
the tab has to be <code>Plate Map</code>. The function
<code><a href="../reference/process_well_sample_details.html">process_well_sample_details()</a></code> then reads in that layout and
maps the JPE sample identifiers to well locations, producing a dataframe
in the correct format:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sample_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_well_sample_details.html">process_well_sample_details</a></span><span class="op">(</span>filepath <span class="op">=</span> <span class="st">"path_to/SynergyH1_data.xlsx"</span>,</span>
<span>                                                         sample_type <span class="op">=</span> <span class="st">"mucus"</span>,</span>
<span>                                                         assay_type <span class="op">=</span> <span class="st">"Ots28_Early1"</span>,</span>
<span>                                                         plate_run_id <span class="op">=</span> <span class="va">plate_run_4_7_early_id</span><span class="op">)</span></span></code></pre></div>
<p>The object sample_details is now a data frame that looks like:</p>
<pre eval="FALSE"><code>location,sample_id,sample_type_id,assay_id,plate_run_id
A3,BTC22_3_A_1,1,1,1
A4,BTC22_3_A_2,1,1,1
A6,BTC22_3_A_3,1,1,1
B3,BTC22_3_B_1,1,1,1
B4,BTC22_3_B_2,1,1,1
B6,BTC22_3_B_3,1,1,1</code></pre>
<p>The sample details as a dataframe are an argument to
<code><a href="../reference/process_sherlock.html">process_sherlock()</a></code>, the function that extracts assay result
data from the Synergy H1 reader output and transforms the data into the
correct format for the database. This maps the generic sample
identifiers to the JPE sample identifiers by well location.</p>
</div>
<div class="section level2">
<h2 id="process-sherlock-results">Process SHERLOCK Results<a class="anchor" aria-label="anchor" href="#process-sherlock-results"></a>
</h2>
<p>To extract and transpose the assay result data from the Synergy H1
reader output, provide the <code><a href="../reference/process_sherlock.html">process_sherlock()</a></code> function the
filepath to the result data excel workbook, the sample details dataframe
described above, and the plate size run <em>(either 96 or 384)</em>. The
function will return a list containing both the raw and final assay
results.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">grunID</span><span class="fu">::</span><span class="fu"><a href="../reference/process_sherlock.html">process_sherlock</a></span><span class="op">(</span>sherlock_results_filepath <span class="op">=</span> <span class="st">"path_to/SynergyH1_data.xlsx"</span>,</span>
<span>                                    sample_details <span class="op">=</span> <span class="va">sample_details</span>,</span>
<span>                                    plate_size <span class="op">=</span> <span class="fl">96</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="upload-assay-results">Upload Assay Results<a class="anchor" aria-label="anchor" href="#upload-assay-results"></a>
</h2>
<p>Provide <code>add_assay_results</code> a valid connection to the
database and the processed assay result data. The function returns the
number or records added.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">grunID</span><span class="fu">::</span><span class="fu">add_assay_results</span><span class="op">(</span><span class="va">con</span>, <span class="va">results</span><span class="op">)</span></span></code></pre></div>
<p>And finally, close your open connection to the database:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>Here is the code again to:</p>
<ol style="list-style-type: decimal">
<li>securely manage database credentials</li>
<li>connect to the genetics run identification database</li>
<li>write plate run metadata to the database</li>
<li>prepare Synergy H1 result data for upload to the database</li>
<li>upload assay result data to the database</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu">config</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/config/man/get.html" class="external-link">get</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RPostgres</span><span class="fu">::</span><span class="fu"><a href="https://rpostgres.r-dbi.org/reference/Postgres.html" class="external-link">Postgres</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                      dbname <span class="op">=</span> <span class="va">cfg</span><span class="op">$</span><span class="va">dbname</span>,</span>
<span>                      host <span class="op">=</span> <span class="va">cfg</span><span class="op">$</span><span class="va">host</span>,</span>
<span>                      port <span class="op">=</span> <span class="va">cfg</span><span class="op">$</span><span class="va">port</span>,</span>
<span>                      user <span class="op">=</span> <span class="va">cfg</span><span class="op">$</span><span class="va">username</span>,</span>
<span>                      password <span class="op">=</span> <span class="va">cfg</span><span class="op">$</span><span class="va">password</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plate_run_uid</span> <span class="op">&lt;-</span> <span class="fu">grunID</span><span class="fu">::</span><span class="fu"><a href="../reference/add_plate_run.html">add_plate_run</a></span><span class="op">(</span><span class="va">con</span>, protocol_id <span class="op">=</span> <span class="fl">1</span>, genetic_method_id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                       laboratory_id <span class="op">=</span> <span class="fl">1</span>, lab_work_performed_by <span class="op">=</span> <span class="st">"Yogi Bear"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sample_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_well_sample_details.html">process_well_sample_details</a></span><span class="op">(</span>filepath <span class="op">=</span> <span class="st">"path_to/SynergyH1_data.xlsx"</span>,</span>
<span>                                                         sample_type <span class="op">=</span> <span class="st">"mucus"</span>,</span>
<span>                                                         assay_type <span class="op">=</span> <span class="st">"Ots28_Early1"</span>,</span>
<span>                                                         plate_run_id <span class="op">=</span> <span class="va">plate_run_4_7_early_id</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">grunID</span><span class="fu">::</span><span class="fu"><a href="../reference/process_sherlock.html">process_sherlock</a></span><span class="op">(</span>sherlock_results_filepath <span class="op">=</span> <span class="st">"path_to/SynergyH1_data.xlsx"</span>,</span>
<span>                                    sample_details <span class="op">=</span> <span class="va">sample_details</span>,</span>
<span>                                    plate_size <span class="op">=</span> <span class="fl">96</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">grunID</span><span class="fu">::</span><span class="fu">add_assay_results</span><span class="op">(</span><span class="va">con</span>, <span class="va">results</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Emanuel Rodriguez, Liz Stebbins.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
